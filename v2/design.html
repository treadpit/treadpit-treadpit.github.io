<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>插件系统 | 小历同学</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="在2.0中使用了插件系统，按需引入对应功能插件">
    <link rel="preload" href="/wx_calendar/assets/css/0.styles.15ac53b1.css" as="style"><link rel="preload" href="/wx_calendar/assets/js/app.1780e7ca.js" as="script"><link rel="preload" href="/wx_calendar/assets/js/2.9de5e40c.js" as="script"><link rel="preload" href="/wx_calendar/assets/js/4.c6ad08bc.js" as="script"><link rel="prefetch" href="/wx_calendar/assets/js/10.1be0040d.js"><link rel="prefetch" href="/wx_calendar/assets/js/11.cbec1f11.js"><link rel="prefetch" href="/wx_calendar/assets/js/12.a3e435aa.js"><link rel="prefetch" href="/wx_calendar/assets/js/13.9d2e2314.js"><link rel="prefetch" href="/wx_calendar/assets/js/14.52129fcf.js"><link rel="prefetch" href="/wx_calendar/assets/js/3.53026b55.js"><link rel="prefetch" href="/wx_calendar/assets/js/5.3961857e.js"><link rel="prefetch" href="/wx_calendar/assets/js/6.951bd407.js"><link rel="prefetch" href="/wx_calendar/assets/js/7.378e8086.js"><link rel="prefetch" href="/wx_calendar/assets/js/8.e6f32368.js"><link rel="prefetch" href="/wx_calendar/assets/js/9.ebd88944.js">
    <link rel="stylesheet" href="/wx_calendar/assets/css/0.styles.15ac53b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wx_calendar/" class="home-link router-link-active"><!----> <span class="site-name">小历同学</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档版本" class="dropdown-title"><span class="title">文档版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档版本" class="mobile-dropdown-title"><span class="title">文档版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wx_calendar/v1/guide/" class="nav-link">
  1.x
</a></li><li class="dropdown-item"><!----> <a href="/wx_calendar/v2/guide/" class="nav-link">
  2.0
</a></li></ul></div></div> <a href="https://github.com/treadpit/wx_calendar" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档版本" class="dropdown-title"><span class="title">文档版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档版本" class="mobile-dropdown-title"><span class="title">文档版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wx_calendar/v1/guide/" class="nav-link">
  1.x
</a></li><li class="dropdown-item"><!----> <a href="/wx_calendar/v2/guide/" class="nav-link">
  2.0
</a></li></ul></div></div> <a href="https://github.com/treadpit/wx_calendar" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/wx_calendar/v2/guide.html" class="sidebar-link">快速开始</a></li><li><a href="/wx_calendar/v2/plugin.html" class="sidebar-link">安装插件</a></li><li><a href="/wx_calendar/v2/api.html" class="sidebar-link">功能一览</a></li><li><a href="/wx_calendar/v2/design.html" aria-current="page" class="active sidebar-link">插件系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wx_calendar/v2/design.html#运行机制" class="sidebar-link">运行机制</a></li><li class="sidebar-sub-header"><a href="/wx_calendar/v2/design.html#插件结构" class="sidebar-link">插件结构</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>基于一系列原因，有了小历同学2.0的重构版本，该版本使用了插件系统，使得项目更轻量，结构更清晰，开发及维护成本大大降低。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>此插件系统未考虑异步数据流及执行优先级的情况</p></div> <h2 id="运行机制"><a href="#运行机制" class="header-anchor">#</a> 运行机制</h2> <p>插件采用了管道的思想，数据会流经各个插件，经过一系列插件处理后见需要渲染的数据交还给 <code>render</code> 函数，由 <code>render</code> 函数负责渲染。</p> <p><img src="data:image/png;base64,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" alt=""></p> <h2 id="插件结构"><a href="#插件结构" class="header-anchor">#</a> 插件结构</h2> <p>拿简单的农历插件来说，该插件其实要满足的就是对于日期农历的计算。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> renderCalendar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../render'</span>
<span class="token keyword">import</span> convertSolarLunar <span class="token keyword">from</span> <span class="token string">'./convertSolarLunar'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'convertSolarLunar'</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * beforeRender 可在日历渲染前做 calendarData 数据的处理操作
     * calendarData 由上一个插件处理后的数据
     * calendarConfig 组件配置
     * component 当前组件实例
     * @return calendarData
     **/</span>
    <span class="token function">beforeRender</span><span class="token punctuation">(</span><span class="token parameter">calendarData<span class="token punctuation">,</span> calendarConfig<span class="token punctuation">,</span> component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// do some thing</span>
      <span class="token keyword">const</span> some_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token comment">// 此处须返回处理后的数据，否则下一个插件不能接收到数据导致不能运行</span>
      <span class="token comment">// 无需做数据处理则不需要复写方法，或者直接返回上游的 calendarData</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        some_data<span class="token punctuation">,</span>
        <span class="token operator">...</span>calendarData
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 点击日期时可在日历渲染前根据所选日期做自有的处理
     * tapeDate 当前点击的日期
     * calendarData 由上一个插件处理后的数据
     * calendarConfig 组件配置
     * @return calendarData
     **/</span>
    <span class="token function">onTapDate</span><span class="token punctuation">(</span><span class="token parameter">tapeDate<span class="token punctuation">,</span> calendarData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> calendarConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// do some thing</span>

      <span class="token comment">// 此处须返回处理后的数据，否则下一个插件不能接收到数据导致不能运行</span>
      <span class="token comment">// 无需做数据处理则不需要复写方法，或者直接返回上游的 calendarData</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>calendarData
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 需要挂载到组件实例上的方法
     **/</span>
    <span class="token function">methods</span><span class="token punctuation">(</span><span class="token parameter">component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">convertSolarLunar</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">dataInfo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> date <span class="token punctuation">}</span> <span class="token operator">=</span> dataInfo
          <span class="token keyword">return</span> convertSolarLunar<span class="token punctuation">.</span><span class="token function">solar2lunar</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> date<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 调用 renderCalendar 示例</span>
        <span class="token function-variable function">other</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 当调用该方法时，做一些处理，比如组件数据处理</span>
          <span class="token keyword">const</span> calendarData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token comment">// 数据处理完毕后交由 renderCalender 处理，注意此处需要使用call将当前组件的实例绑定到 renderCalendar 上</span>
          <span class="token comment">// 此处调用 renderCalendar 后会经由一系列插件（包括此插件）的 beforeRender 处理</span>
          <span class="token function">renderCalendar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>component<span class="token punctuation">,</span> calendarData<span class="token punctuation">,</span> <span class="token punctuation">[</span>config<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>至此一个简单的插件已经开发完成。</p> <p>相较于 <code>1.x</code> 版本无论是否需要农历功能，都需要附带一个比较大的农历计算 <code>js</code> 库，采用插件形式则可以将不需要的功能给去除。</p> <p>对于小程序有代码大小包的限制来说寸土寸金，对比仅需展示简单功能的而言，<code>2.0</code> 比 <code>1.x</code> 版本体积减少达 70%。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/treadpit/wx_calendar/edit/plugin-mode/v2/design.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/3/2020, 11:16:15 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wx_calendar/v2/api.html" class="prev">
        功能一览
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wx_calendar/assets/js/app.1780e7ca.js" defer></script><script src="/wx_calendar/assets/js/2.9de5e40c.js" defer></script><script src="/wx_calendar/assets/js/4.c6ad08bc.js" defer></script>
  </body>
</html>
